import{T as m,j as g}from"../__chunks__/lit-element.BYUc91cE.js";import{c as l}from"../__chunks__/cleanUpBlock.DyBWs1cd.js";import{m as u}from"../__chunks__/index.module.DQI0LCqS.js";import{g as p}from"../__chunks__/getUrlForEndpoint.CxBBQRxT.js";import"../__chunks__/isSidekickLibraryActive.U-fJCMMj.js";class d{constructor(){this.runtimeCache=new Map}get(e){return this.runtimeCache.get(e)}set(e,t){this.runtimeCache.set(e,t)}has(e){return this.runtimeCache.has(e)}delete(e){this.runtimeCache.delete(e)}}class C{constructor(){this.requestPipeline=new Map,this.runtimeCache=new d}fetchJsonExternal(e,t={}){return this.fetchData(e,t,this.getResponseJSON)}fetchJson(e,t={}){return this.fetchData(p(e).href,t,this.getResponseJSON)}fetchText(e,t={}){return this.fetchData(p(e).href,t,this.getResponseText)}async fetchData(e,t,s){const{cacheOptions:r}=t,o=this.getCachedData(e,r);if(o!==null)return o;const i=this.requestPipeline.get(e);if(i!==void 0)return s(await i);const c=fetch(e,t.fetchOptions);this.requestPipeline.set(e,c);const a=await c;this.requestPipeline.delete(e);const h=await s(a);if(this.setCachedData(e,h,r),!a.ok){const f=await a.text();throw u.error(`FetchService: Error fetching data from ${e}: ${f}`),new Error(`Error fetching data from ${e}: ${f}`)}return h}async getResponseJSON(e){return await e.clone().json()}async getResponseText(e){return await e.clone().text()}getCachedData(e,t){return(t==null?void 0:t.cacheType)==="runtime"?this.runtimeCache.get(e)??null:null}setCachedData(e,t,s){(s==null?void 0:s.cacheType)==="runtime"&&this.runtimeCache.set(e,t)}}const w=new C;async function v(n){const e="https://21199447-2ef4-4b02-874e-d3f6f3fbeb14.mock.pstmn.io/get",t={cacheOptions:{cacheType:"runtime"}};let s="";try{s=(await w.fetchJsonExternal(e,t)).data}catch(r){u.error("VBPage: Error fetching vbPage data:",r),s=m}l(n),g(s,n)}export{v as default};
//# sourceMappingURL=vbpage.js.map
