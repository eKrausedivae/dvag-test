import{c,d as a,e as l,f as m}from"../__chunks__/loadBlock.CiHl7HW5.js";import"../__chunks__/preload-helper.DX1wzJSG.js";import"../__chunks__/index.module.DQI0LCqS.js";import"../__chunks__/isSidekickLibraryActive.U-fJCMMj.js";async function f(t){const e=[...t.querySelectorAll("div.block")].map(o=>c(o));await Promise.all(e)}async function u(t){if(t&&t.startsWith("/")){t=t.replace(/(\.plain)?\.html/,"");const n=await fetch(`${t}.plain.html`);if(n.ok){const e=document.createElement("main");e.innerHTML=await n.text();const o=(r,s)=>{e.querySelectorAll(`${r}[${s}^="./media_"]`).forEach(i=>{i[s]=new URL(i.getAttribute(s)??"",new URL(t,window.location.origin)).href})};return o("img","src"),o("source","srcset"),a(e),l(e),m(e),await f(e),e}}return null}async function y(t){var r;const n=t.querySelector("a"),e=n?n.getAttribute("href"):(r=t.textContent)==null?void 0:r.trim();if(!e)return;const o=await u(e);if(o){const s=o.querySelector(":scope .section");s&&(t.classList.add(...s.classList),t.classList.remove("section"),t.replaceChildren(...s.childNodes))}}export{y as default,u as loadFragment};
//# sourceMappingURL=fragment.js.map
