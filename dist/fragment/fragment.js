import{c,d as a,e as l,f as m}from"../__chunks__/loadBlock.t01d0D6A.js";import"../__chunks__/preload-helper.DX1wzJSG.js";import"../__chunks__/index.module.DQI0LCqS.js";import"../__chunks__/getUrlForEndpoint.CxBBQRxT.js";import"../__chunks__/isSidekickLibraryActive.U-fJCMMj.js";async function f(t){const e=[...t.querySelectorAll("div.block")].map(o=>c(o));await Promise.all(e)}async function u(t){if(t&&t.startsWith("/")){t=t.replace(/(\.plain)?\.html/,"");const s=await fetch(`${t}.plain.html`);if(s.ok){const e=document.createElement("main");e.innerHTML=await s.text();const o=(n,r)=>{e.querySelectorAll(`${n}[${r}^="./media_"]`).forEach(i=>{i[r]=new URL(i.getAttribute(r)??"",new URL(t,window.location.origin)).href})};return o("img","src"),o("source","srcset"),a(e),l(e),m(e),await f(e),e}}return null}async function L(t){var n;const s=t.querySelector("a"),e=s?s.getAttribute("href"):(n=t.textContent)==null?void 0:n.trim();if(!e)return;const o=await u(e);if(o){const r=o.querySelector(":scope .section");r&&(t.classList.add(...r.classList),t.classList.remove("section"),t.replaceChildren(...r.childNodes))}}export{L as default,u as loadFragment};
//# sourceMappingURL=fragment.js.map
